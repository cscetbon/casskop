"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9430],{80:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var n=s(5893),i=s(1151);const a={title:"Release guide",sidebar_label:"Release guide"},o=void 0,r={id:"contributing/release_guide",title:"Release guide",description:"There are several things to do when you want to make a release of the project:",source:"@site/docs/8_contributing/2_release_guide.md",sourceDirName:"8_contributing",slug:"/contributing/release_guide",permalink:"/casskop/docs/contributing/release_guide",draft:!1,unlisted:!1,editUrl:"https://github.com/cscetbon/casskop/edit/master/website/docs/8_contributing/2_release_guide.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Release guide",sidebar_label:"Release guide"},sidebar:"docs",previous:{title:"Developer guide",permalink:"/casskop/docs/contributing/developer_guide"},next:{title:"Reporting bugs",permalink:"/casskop/docs/contributing/reporting_bugs"}},l={},c=[{value:"With Helm",id:"with-helm",level:2},{value:"Release helm charts on GitHub",id:"release-helm-charts-on-github",level:3},{value:"With OLM (Operator Lifecycle Manager)",id:"with-olm-operator-lifecycle-manager",level:2},{value:"Create new OLM release",id:"create-new-olm-release",level:3},{value:"Instruction to tests locally with OLM",id:"instruction-to-tests-locally-with-olm",level:3}];function h(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",input:"input",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"There are several things to do when you want to make a release of the project:\nTodo: things should be automatize ;)"}),"\n",(0,n.jsx)(t.p,{children:"For ease, we have same version for casskop and multi-casskop"}),"\n",(0,n.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,n.jsxs)(t.li,{className:"task-list-item",children:[(0,n.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Update Changelog.md with informations for the new release"]}),"\n",(0,n.jsxs)(t.li,{className:"task-list-item",children:[(0,n.jsx)(t.input,{type:"checkbox",disabled:!0})," ","update version/version.go with the new release version"]}),"\n",(0,n.jsxs)(t.li,{className:"task-list-item",children:[(0,n.jsx)(t.input,{type:"checkbox",disabled:!0})," ","update multi-casskop/version/version.go with the new release version"]}),"\n",(0,n.jsxs)(t.li,{className:"task-list-item",children:[(0,n.jsx)(t.input,{type:"checkbox",disabled:!0})," ","update charts/casskop/Chart.yaml and values.yaml"]}),"\n",(0,n.jsxs)(t.li,{className:"task-list-item",children:[(0,n.jsx)(t.input,{type:"checkbox",disabled:!0})," ","update multi-casskop/charts/multi-casskop/Chart.yaml and values.yaml"]}),"\n",(0,n.jsxs)(t.li,{className:"task-list-item",children:[(0,n.jsx)(t.input,{type:"checkbox",disabled:!0})," ","generate casskop helm with ",(0,n.jsx)(t.code,{children:"make helm-package"})]}),"\n",(0,n.jsxs)(t.li,{className:"task-list-item",children:[(0,n.jsx)(t.input,{type:"checkbox",disabled:!0})," ","add to git docs/helm, commit & push"]}),"\n",(0,n.jsxs)(t.li,{className:"task-list-item",children:[(0,n.jsx)(t.input,{type:"checkbox",disabled:!0})," ","once the PR is merged to master, create the release with content of changelog for this version","\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://github.com/cscetbon/casskop/releases",children:"https://github.com/cscetbon/casskop/releases"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"with-helm",children:"With Helm"}),"\n",(0,n.jsxs)(t.p,{children:["The CassKop operator is released in the helm/charts/incubator see : ",(0,n.jsx)(t.a,{href:"https://github.com/helm/charts/pull/14414",children:"https://github.com/helm/charts/pull/14414"})]}),"\n",(0,n.jsx)(t.p,{children:"We also have a helm repository hosted on GitHub pages."}),"\n",(0,n.jsx)(t.h3,{id:"release-helm-charts-on-github",children:"Release helm charts on GitHub"}),"\n",(0,n.jsx)(t.p,{children:"In order to release the Helm charts on GitHub, we need to generate the package locally"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"make helm-package\n"})}),"\n",(0,n.jsx)(t.p,{children:"then add to git the package and make a PR on the repo."}),"\n",(0,n.jsx)(t.h2,{id:"with-olm-operator-lifecycle-manager",children:"With OLM (Operator Lifecycle Manager)"}),"\n",(0,n.jsxs)(t.p,{children:["OLM is used to manage lifecycle of the Operator, and is also used to puclish on ",(0,n.jsx)(t.a,{href:"https://operatorhub.io",children:"https://operatorhub.io"})]}),"\n",(0,n.jsx)(t.h3,{id:"create-new-olm-release",children:"Create new OLM release"}),"\n",(0,n.jsx)(t.p,{children:"You can create new version of CassKop OLM bundle using:"}),"\n",(0,n.jsx)(t.p,{children:"Exemple for generating version 0.0.4"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"operator-sdk olm-catalog gen-csv --csv-version 0.4.0 --update-crds\n"})}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"You may need to manually update some fileds (such as description..), you can refere to previous versions for that"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"instruction-to-tests-locally-with-olm",children:"Instruction to tests locally with OLM"}),"\n",(0,n.jsx)(t.p,{children:"Before submitting the operator to operatorhub.io you need to install and test OLM on a local Kubernetes."}),"\n",(0,n.jsxs)(t.p,{children:["These tests and all pre-requisite can also be executed automatically in a single step using a\n",(0,n.jsx)(t.a,{href:"https://github.com/operator-framework/community-operators/blob/master/docs/using-scripts.md",children:"Makefile"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Go to github/operator-framework/community-operators to interract with the OLM makefile"}),"\n",(0,n.jsx)(t.p,{children:"Install OLM"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"make operator.olm.install\n"})}),"\n",(0,n.jsx)(t.p,{children:"Launch lint"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"make operator.verify OP_PATH=community-operators/casskop VERBOSE=true\n"})}),"\n",(0,n.jsx)(t.p,{children:"Launch tests"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"make operator.test OP_PATH=community-operators/casskop VERBOSE=true\n"})})]})}function d(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>r,a:()=>o});var n=s(7294);const i={},a=n.createContext(i);function o(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);