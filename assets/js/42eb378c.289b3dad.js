"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7542],{1372:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>o,frontMatter:()=>n,metadata:()=>a,toc:()=>h});var r=t(5893),d=t(1151);const n={title:"Cassandra restore",sidebar_label:"Cassandra restore"},i=void 0,a={id:"references/cassandra_restore",title:"Cassandra restore",description:"CassandraRestoreSpec defines the specification for a restore of a Cassandra backup.",source:"@site/docs/6_references/6_cassandra_restore.md",sourceDirName:"6_references",slug:"/references/cassandra_restore",permalink:"/casskop/docs/references/cassandra_restore",draft:!1,unlisted:!1,editUrl:"https://github.com/cscetbon/casskop/edit/master/website/docs/6_references/6_cassandra_restore.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Cassandra restore",sidebar_label:"Cassandra restore"},sidebar:"docs",previous:{title:"Cassandra backup",permalink:"/casskop/docs/references/cassandra_backup"},next:{title:"Operations Issues",permalink:"/casskop/docs/troubleshooting/operations_issues"}},c={},h=[{value:"CassandraRestore",id:"cassandrarestore",level:2},{value:"CassandraRestoreSpec",id:"cassandrarestorespec",level:2},{value:"CassandraRestoreStatus",id:"cassandrarestorestatus",level:2},{value:"Condition",id:"condition",level:3},{value:"Items",id:"items",level:3}];function l(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"CassandraRestoreSpec"})," defines the specification for a restore of a Cassandra backup."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"apiVersion: db.orange.com/v2\nkind: CassandraRestore\nmetadata:\n  name: restore-demo\nspec:\n  cassandraCluster: cluster-demo\n  cassandraBackup: backup-demo\n  entities: k1.standard1\n"})}),"\n",(0,r.jsx)(s.h2,{id:"cassandrarestore",children:"CassandraRestore"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Required"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"metadata"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"https://godoc.org/k8s.io/apimachinery/pkg/apis/meta/v1#ObjectMeta",children:"ObjectMetadata"})}),(0,r.jsx)(s.td,{children:"is metadata that all persisted resources must have, which includes all objects users must create."}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"nil"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"spec"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"#cassandrarestorespec",children:"CassandraRestoreSpec"})}),(0,r.jsx)(s.td,{children:"defines the desired state of CassandraRestore."}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"nil"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"status"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"#cassandrarestorestatus",children:"CassandraRestoreStatus"})}),(0,r.jsx)(s.td,{children:"defines the observed state of CassandraRestore."}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"nil"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"cassandrarestorespec",children:"CassandraRestoreSpec"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Required"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"cassandraBackup"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsxs)(s.td,{children:["Name of the ",(0,r.jsx)(s.a,{href:"/casskop/docs/references/cassandra_backup",children:"CassandraBackup"})," to restore"]}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"cassandraCluster"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Name of the CassandraCluster the restore belongs to"}),(0,r.jsx)(s.td,{children:"Yes"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"cassandraDirectory"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Directory of Cassandra where data folder resides. Defaults to /var/lib/cassandra"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"datacenter"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Cassandra DC name to restore to, a restore will truncate tables but restore only to this datacenter if specified"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"concurrentConnection"}),(0,r.jsx)(s.td,{children:"int32"}),(0,r.jsx)(s.td,{children:"Maximum number of threads used to download files from the cloud. Defaults to 10"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"entities"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Database entities to restore, it might be either only keyspaces or only tables prefixed by their respective keyspace, e.g. 'k1,k2' if one wants to backup whole keyspaces or 'ks1.t1,ks2.t2' if one wants to restore specific tables. These formats are mutually exclusive so 'k1,k2.t2' is invalid. An empty field will restore all keyspaces"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"exactSchemaVersion"}),(0,r.jsx)(s.td,{children:"boolean"}),(0,r.jsx)(s.td,{children:"When set a running node's schema version must match the snapshot's schema version. There might be cases when we want to restore a table for which its CQL schema has not changed but it has changed for other table / keyspace but a schema for that node has changed by doing that. Defaults to False"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"false"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"noDeleteTruncates"}),(0,r.jsx)(s.td,{children:"boolean"}),(0,r.jsx)(s.td,{children:"When set do not delete truncated SSTables after they've been restored during CLEANUP phase. Defaults to false"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"false"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"schemaVersion"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Version of the schema to restore from. Upon backup, a schema version is automatically appended to a snapshot name and its manifest is uploaded under that name. In case we have two snapshots having same name, we might distinguish between the two of them by using the schema version. If schema version is not specified, we expect a unique backup taken with respective snapshot name. This schema version has to match the version of a Cassandra node we are doing restore for (hence, by proxy, when global request mode is used, all nodes have to be on exact same schema version). Defaults to False"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"secret"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Name of Secret to use when accessing cloud storage providers"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"cassandrarestorestatus",children:"CassandraRestoreStatus"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Required"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"condition"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"#condition",children:"Condition"})}),(0,r.jsx)(s.td,{children:"BackRestCondition describes the observed state of a Restore at a certain point"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"coordinatorMember"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Name of the pod the restore operation is executed on"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"id"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"unique identifier of an operation, a random id is assigned to each operation after a request is submitted, from caller's perspective, an id is sent back as a response to his request so he can further query state of that operation, referencing id, by operations/{id} endpoint"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"progress"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Progress is a percentage, 100% means the operation is completed, either successfully or with errors"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"timeCompleted"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"timeCreated"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"timeStarted"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"condition",children:"Condition"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Required"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"failureCause"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.a,{href:"#items",children:"[]items"})}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"nil"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"lastTransitionTime"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"type"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"items",children:"Items"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Field"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Required"}),(0,r.jsx)(s.th,{children:"Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"message"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"message explaining the error"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"source"}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"hostame of a node where this error has occurred"}),(0,r.jsx)(s.td,{children:"No"}),(0,r.jsx)(s.td,{children:"-"})]})]})]})]})}function o(e={}){const{wrapper:s}={...(0,d.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},1151:(e,s,t)=>{t.d(s,{Z:()=>a,a:()=>i});var r=t(7294);const d={},n=r.createContext(d);function i(e){const s=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:i(e.components),r.createElement(n.Provider,{value:s},e.children)}}}]);