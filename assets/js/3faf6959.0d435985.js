"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8715],{2661:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var n=a(5893),t=a(1151);const r={title:"Getting Started",sidebar_label:"Getting Started"},o=void 0,i={id:"setup/getting_started",title:"Getting Started",description:"CassKop uses the standard Cassandra image (tested up to Version 3.11), and can run on Kubernetes 1.13.3+.",source:"@site/docs/2_setup/1_getting_started.md",sourceDirName:"2_setup",slug:"/setup/getting_started",permalink:"/casskop/docs/setup/getting_started",draft:!1,unlisted:!1,editUrl:"https://github.com/cscetbon/casskop/edit/master/website/docs/2_setup/1_getting_started.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Getting Started",sidebar_label:"Getting Started"},sidebar:"docs",previous:{title:"Design Principes",permalink:"/casskop/docs/concepts/design_principes"},next:{title:"Install Plugin",permalink:"/casskop/docs/setup/install_plugin"}},l={},c=[{value:"CassKop deployment",id:"casskop-deployment",level:2},{value:"Kubernetes preparation",id:"kubernetes-preparation",level:3},{value:"Installing CassKop with Helm 3",id:"installing-casskop-with-helm-3",level:3},{value:"Deploy a Cassandra cluster",id:"deploy-a-cassandra-cluster",level:3},{value:"Deploy a ConfigMap",id:"deploy-a-configmap",level:4},{value:"Deploy CassandraCluster resource",id:"deploy-cassandracluster-resource",level:4},{value:"Monitoring",id:"monitoring",level:3},{value:"Deploy Prometheus",id:"deploy-prometheus",level:4},{value:"Add ServiceMonitor for Cassandra",id:"add-servicemonitor-for-cassandra",level:4},{value:"Add Grafana dashboard for Cassandra",id:"add-grafana-dashboard-for-cassandra",level:4}];function d(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"CassKop uses the standard Cassandra image (tested up to Version 3.11), and can run on Kubernetes 1.13.3+."}),"\n",(0,n.jsx)(s.p,{children:"As a pre-requisite it needs :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/",children:"kubectl"})," version v1.13.3+."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://helm.sh/",children:"Helm"})," version v3."]}),"\n",(0,n.jsx)(s.li,{children:"Access to a Kubernetes v1.13.3+ cluster."}),"\n",(0,n.jsx)(s.li,{children:"Cassandra needs fast local storage (we have tested with local storage provisioner, GKE ssd storage, and Rancher local-path-provisioner). Fast remote storage should work but is not tested yet."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"casskop-deployment",children:"CassKop deployment"}),"\n",(0,n.jsx)(s.h3,{id:"kubernetes-preparation",children:"Kubernetes preparation"}),"\n",(0,n.jsxs)(s.p,{children:["First, we need to create a ",(0,n.jsx)(s.code,{children:"namespace"})," in order to host our operator & cluster (here we call it cassandra)"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"kubectl create namespace cassandra\n"})}),"\n",(0,n.jsx)(s.h3,{id:"installing-casskop-with-helm-3",children:"Installing CassKop with Helm 3"}),"\n",(0,n.jsxs)(s.p,{children:["You can (should) deploy CassKop using this ",(0,n.jsx)(s.a,{href:"https://github.com/Orange-Opensource/casskop/tree/master/helm",children:"Helm 3 chart"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"helm install casskop oci://ghcr.io/cscetbon/casskop-helm\n"})}),"\n",(0,n.jsxs)(s.p,{children:["You can find more information in the ",(0,n.jsx)(s.a,{href:"/casskop/docs/configuration_deployment/customizable_install_with_helm",children:"Customizable install with helm"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["If you have problem you can see ",(0,n.jsx)(s.a,{href:"/casskop/docs/troubleshooting/operations_issues",children:"Troubleshooting"})," section"]}),"\n",(0,n.jsx)(s.h3,{id:"deploy-a-cassandra-cluster",children:"Deploy a Cassandra cluster"}),"\n",(0,n.jsx)(s.h4,{id:"deploy-a-configmap",children:"Deploy a ConfigMap"}),"\n",(0,n.jsxs)(s.p,{children:["Before we can deploy our cluster, we need to create a configmap.\nThis configmap will enable us to customize Cassandra's behaviour.\nMore details on this can be found ",(0,n.jsx)(s.a,{href:"/casskop/docs/configuration_deployment/cassandra_configuration#configuration-override-using-configmap",children:"here"})]}),"\n",(0,n.jsx)(s.p,{children:"But for our example we will use the simple example:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"kubectl apply -f config/samples/cassandra-configmap-v1.yaml\n"})}),"\n",(0,n.jsx)(s.h4,{id:"deploy-cassandracluster-resource",children:"Deploy CassandraCluster resource"}),"\n",(0,n.jsx)(s.p,{children:"Once the operator is deployed inside a Kubernetes cluster, a new API will be accessible, so\nyou'll be able to create, update and delete cassandraclusters."}),"\n",(0,n.jsxs)(s.p,{children:["In order to deploy a new cassandra cluster a ",(0,n.jsx)(s.a,{href:"https://github.com/cscetbon/casskop/blob/master/config/samples/cassandracluster.yaml",children:"specification"})," has to be created. As an example :"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"kubectl apply -f config/samples/cassandracluster.yaml\n"})}),"\n",(0,n.jsx)(s.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,n.jsx)(s.p,{children:"We can quickly setup monitoring for our deployed Cassandra nodes using\nPrometheus operator."}),"\n",(0,n.jsx)(s.h4,{id:"deploy-prometheus",children:"Deploy Prometheus"}),"\n",(0,n.jsxs)(s.p,{children:["You can deploy the CoreOs Prometheus operator on your cluster:\nYou can find example ",(0,n.jsx)(s.a,{href:"https://github.com/cscetbon/casskop/blob/master/config/samples/prometheus-values.yaml",children:"helm value.yaml"})," to configure the Prometheus operator:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-console",children:'kubectl create namespace monitoring\nhelm install --namespace monitoring prometheus-monitoring stable/prometheus-operator \\\n    --set prometheusOperator.createCustomResource=false \\\n    --set grafana.image.tag=7.0.1 \\\n    --set grafana.plugins="{briangann-gauge-panel,grafana-clock-panel,grafana-piechart-panel,grafana-polystat-panel,savantly-heatmap-panel,vonage-status-panel}"\n'})}),"\n",(0,n.jsx)(s.h4,{id:"add-servicemonitor-for-cassandra",children:"Add ServiceMonitor for Cassandra"}),"\n",(0,n.jsxs)(s.p,{children:["Then you have to create ServiceMonitor objects to monitor Cassandra nodes and CassKop. You can update this to specify\nwhich namespace to monitor (Your namespace need to be listed in the ",(0,n.jsx)(s.code,{children:"namespaceSelector"})," section.)"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.code,{children:"kubectl  apply -f monitoring/servicemonitor/"})}),"\n",(0,n.jsx)(s.h4,{id:"add-grafana-dashboard-for-cassandra",children:"Add Grafana dashboard for Cassandra"}),"\n",(0,n.jsxs)(s.p,{children:["You can use our dashboard that monitors both Cassandra nodes and CassKop by running:\n",(0,n.jsx)(s.code,{children:"kubectl  apply -f monitoring/dashboards/"})]})]})}function p(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},1151:(e,s,a)=>{a.d(s,{Z:()=>i,a:()=>o});var n=a(7294);const t={},r=n.createContext(t);function o(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);