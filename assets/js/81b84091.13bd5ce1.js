"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1902],{1631:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>i,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"references/multicasskop","title":"MultiCasskop","description":"MultiCasskop describes the desired state of the Cassandra cluster in a multi-site mode we want to setup through the operator.","source":"@site/docs/6_references/4_multicasskop.md","sourceDirName":"6_references","slug":"/references/multicasskop","permalink":"/casskop/docs/references/multicasskop","draft":false,"unlisted":false,"editUrl":"https://github.com/cscetbon/casskop/edit/master/website/docs/6_references/4_multicasskop.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"MultiCasskop","sidebar_label":"MultiCasskop"},"sidebar":"docs","previous":{"title":"Cassandra cluster Status","permalink":"/casskop/docs/references/cassandra_cluster_status"},"next":{"title":"Cassandra backup","permalink":"/casskop/docs/references/cassandra_backup"}}');var a=t(4848),r=t(8453);const c={title:"MultiCasskop",sidebar_label:"MultiCasskop"},d=void 0,i={},l=[{value:"MultiCasskop",id:"multicasskop",level:2},{value:"MultiCasskopSpec",id:"multicasskopspec",level:2},{value:"MultiCasskopStatus",id:"multicasskopstatus",level:2}];function o(e){const s={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.code,{children:"MultiCasskop"})," describes the desired state of the Cassandra cluster in a multi-site mode we want to setup through the operator."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-yaml",children:'apiVersion: db.orange.com/v2\nkind: MultiCasskop\nmetadata:\n name: multi-casskop-demo\nspec:\n deleteCassandraCluster: true\n base: #<-- Specify the base of our CassandraCluster\n   apiVersion: "db.orange.com/v2"\n   kind: "CassandraCluster"\n   metadata:\n     name: cassandra-demo\n     namespace: cassandra-demo\n     labels:\n       cluster: casskop\n   spec:\n     cassandraImage: cassandra:3.11\n     bootstrapImage: ghcr.io/cscetbon/casskop-bootstrap:0.1.4\n     configMapName: cassandra-configmap-v1\n     service:\n       annotations:\n         external-dns.alpha.kubernetes.io/hostname: casskop.external-dns-test.gcp.trycatchlearn.fr.\n     rollingPartition: 0\n     dataCapacity: "20Gi"\n     dataStorageClass: "standard-wait"\n     imagepullpolicy: IfNotPresent\n#      imagepullpolicy: Always\n     hardAntiAffinity: false\n     deletePVC: true\n     autoPilot: false\n     autoUpdateSeedList: false\n     debug: false\n     maxPodUnavailable: 1\n     nodesPerRacks: 1\n     runAsUser: 999\n     resources:\n       limits:\n         cpu: \'1\'\n         memory: 2Gi\n   status:\n     seedlist:   #<-- at this time the seedlist must be fullfilled manually with known predictive name of pods\n       - cassandra-demo-dc1-rack1-0.casskop.external-dns-test.gcp.trycatchlearn.fr\n       - cassandra-demo-dc3-rack3-0.casskop.external-dns-test.gcp.trycatchlearn.fr\n       - cassandra-demo-dc4-rack4-0.casskop.external-dns-test.gcp.trycatchlearn.fr\n       - cassandra-demo-dc4-rack4-1.casskop.external-dns-test.gcp.trycatchlearn.fr\n override: #<-- Specify overrides of the CassandraCluster depending on the target kubernetes cluster\n   gke-master-west1-b:\n     spec:\n       topology:\n         dc:\n           - name: dc1\n             nodesPerRacks: 1\n             config:\n               cassandra-yaml:\n                 num_tokens: 256\n             labels:\n               failure-domain.beta.kubernetes.io/region: europe-west1\n             rack:\n               - name: rack1\n                 rollingPartition: 0\n                 labels:\n                   failure-domain.beta.kubernetes.io/zone: europe-west1-b\n   gke-slave-west1-d:\n     spec:\n       imagepullpolicy: IfNotPresent\n       topology:\n         dc:\n           - name: dc3\n             nodesPerRacks: 1\n             config:\n               cassandra-yaml:\n                 num_tokens: 256\n             labels:\n               failure-domain.beta.kubernetes.io/region: europe-west1\n             rack:\n               - name: rack3\n                 labels:\n                   failure-domain.beta.kubernetes.io/zone: europe-west1-d\n           - name: dc4\n             nodesPerRacks: 2\n             config:\n               cassandra-yaml:\n                 num_tokens: 256\n             labels:\n               failure-domain.beta.kubernetes.io/region: europe-west1\n             rack:\n               - name: rack4\n                 labels:\n                   failure-domain.beta.kubernetes.io/zone: europe-west1-d\n'})}),"\n",(0,a.jsx)(s.h2,{id:"multicasskop",children:"MultiCasskop"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Field"}),(0,a.jsx)(s.th,{children:"Type"}),(0,a.jsx)(s.th,{children:"Description"}),(0,a.jsx)(s.th,{children:"Required"}),(0,a.jsx)(s.th,{children:"Default"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"metadata"}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.a,{href:"https://godoc.org/k8s.io/apimachinery/pkg/apis/meta/v1#ObjectMeta",children:"ObjectMetadata"})}),(0,a.jsx)(s.td,{children:"is metadata that all persisted resources must have, which includes all objects users must create."}),(0,a.jsx)(s.td,{children:"No"}),(0,a.jsx)(s.td,{children:"nil"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"spec"}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.a,{href:"#multicasskopspec",children:"MultiCasskopSpec"})}),(0,a.jsx)(s.td,{children:"defines the desired state of MultiCasskop."}),(0,a.jsx)(s.td,{children:"No"}),(0,a.jsx)(s.td,{children:"nil"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"status"}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.a,{href:"#multicasskopstatus",children:"MultiCasskopStatus"})}),(0,a.jsx)(s.td,{children:"defines the observed state of MultiCasskop."}),(0,a.jsx)(s.td,{children:"No"}),(0,a.jsx)(s.td,{children:"nil"})]})]})]}),"\n",(0,a.jsx)(s.h2,{id:"multicasskopspec",children:"MultiCasskopSpec"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Field"}),(0,a.jsx)(s.th,{children:"Type"}),(0,a.jsx)(s.th,{children:"Description"}),(0,a.jsx)(s.th,{children:"Required"}),(0,a.jsx)(s.th,{children:"Default"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"deleteCassandraCluster"}),(0,a.jsx)(s.td,{children:"bool"}),(0,a.jsxs)(s.td,{children:["If you have set to true, then when deleting the ",(0,a.jsx)(s.code,{children:"MultiCassKop"})," object, it will cascade the deletion of the ",(0,a.jsx)(s.code,{children:"CassandraCluster"})," object in the targeted k8s clusters. Then each local CassKop will delete their Cassandra clusters."]}),(0,a.jsx)(s.td,{children:"Yes"}),(0,a.jsx)(s.td,{children:"true"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"base"}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.a,{href:"/casskop/docs/references/cassandra_cluster#cassandracluster",children:"CassandraCluster"})}),(0,a.jsxs)(s.td,{children:["Define for all ",(0,a.jsx)(s.code,{children:"CassandraCluster"})," the default configuration"]}),(0,a.jsx)(s.td,{children:"Yes"}),(0,a.jsx)(s.td,{children:"-"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:"override"}),(0,a.jsxs)(s.td,{children:["map[string]",(0,a.jsx)(s.a,{href:"/casskop/docs/references/cassandra_cluster#cassandracluster",children:"CassandraCluster"})]}),(0,a.jsxs)(s.td,{children:["Define for each ",(0,a.jsx)(s.code,{children:"CassandraCluster"})," a specific configuration not shared across all of them"]}),(0,a.jsx)(s.td,{children:"Yes"}),(0,a.jsx)(s.td,{children:"-"})]})]})]}),"\n",(0,a.jsx)(s.h2,{id:"multicasskopstatus",children:"MultiCasskopStatus"}),"\n",(0,a.jsx)(s.table,{children:(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Field"}),(0,a.jsx)(s.th,{children:"Type"}),(0,a.jsx)(s.th,{children:"Description"}),(0,a.jsx)(s.th,{children:"Required"}),(0,a.jsx)(s.th,{children:"Default"})]})})})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>c,x:()=>d});var n=t(6540);const a={},r=n.createContext(a);function c(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);